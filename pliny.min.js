!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.pliny=n()}(this,function(){"use strict";function e(e,n){return n.split(".").reduce(function(e,n){return e[n]},e)}function n(e){var n=1,r=0;return e.split("").forEach(function(e){n=(n+e.charCodeAt(0))%32771,r=(r+n)%32771}),r<<8|n}function r(e){var n=p;if("undefined"!=typeof e&&e.length>0)for(var r=e.split("."),t="",a="",i=0;i<r.length;++i)"undefined"==typeof n[r[i]]&&(n[r[i]]={}),t+=a+r[i],a=".",n=n[r[i]],t.length>0&&!n.name&&(n.name=t);return n}function t(e,n){var t;"undefined"==typeof n.fieldType&&(n.fieldType=e);var i=r(n.parent||""),l=e+"s";l=l.replace(/ys$/,"ies").replace(/ss$/,"ses"),i[l]||(i[l]=[]);var u=i[l],s=!1;for(t=0;t<u.length;++t)u[t].name===n.name&&(s=!0);if(!s){var o={};["examples","issues","comments"].forEach(function(e){"undefined"!=typeof n[e]&&(o[e]=n[e],delete n[e])}),n=a(n),u.push(n),"class"===n.fieldType&&n.baseClass&&(void 0===n.parent&&(n.parent=n.baseClass),c.subClass(n));for(var p in o){var f=o[p],d=p.substring(0,p.length-1);for(t=0;t<f.length;++t)void 0===f[t].parent&&(f[t].parent=n.fullName.replace(/::/g,".")),c[d](f[t])}}}function a(e){var t=(e.parent&&e.parent+"."||"")+e.name,a=r(t);if(!a.fieldType){for(var i in e)a[i]=e[i];a.fullName||("issue"===a.fieldType&&Object.defineProperty(a,"issueID",{get:function(){return n(this.parent+"."+this.name)}}),Object.defineProperty(a,"fullName",{get:function(){var e="";return this.parent&&(e+=this.parent,e+="method"===this.fieldType||"property"===this.fieldType||"event"===this.fieldType?"::":"example"===this.fieldType||"issue"===this.fieldType?": ":"."),e+=this.name}})),a.id||Object.defineProperty(a,"id",{get:function(){return this.fullName.replace(/(\.|:)/g,"_").replace(/ /g,"")}}),l(t)||setTimeout(l,1,t)}return a}function i(e){var n=null;try{n=require(e)}catch(e){n=null}if(n)for(var r in n){var t=n[r];n.hasOwnProperty(r)&&"number"==typeof t&&c.value({parent:e,name:r,type:"Number",description:t.toString(),value:t})}else setTimeout(i,1,e)}function l(n){var r=e(p,n);if(r&&("enumeration"===r.fieldType&&i(r.parent+"."+r.name),"function"==typeof r))for(var t=r.toString(),a=null;a=o.exec(t);){var l=a[1],s=a.index+a[0].length,f=u(t.substring(s));void 0===f.parent&&(f.parent=n),c[l].call(null,f)}return r}function u(e){for(var n=[],r=0,t=0,a=!1,i=null,l=0;l<e.length;++l){var u=e.charAt(l);if((!a||u!==i)&&(a||'"'!==u&&"'"!==u)||0!==l&&"\\"===e.charAt(l-1)||(a=!a,a&&(i=u)),a||("("===u||"{"===u||"["===u?++t:")"!==u&&"}"!==u&&"]"!==u||--t),(0===t||1===t&&","===u&&!a)&&(n.push(s(e.substring(r+1,l).trim())),r=l,0===t))break}if(1!==n.length)throw new Error("There should have only been one parameter to the function");return n[0]}function s(e){var n=[],r=function(e){var r="&STRING_LIT"+n.length+";";return"'"===e[0]&&(e=e.replace(/\\"/g,"&_DBLQUOTE_;").replace(/\\'/g,"&_SGLQUOTE_;").replace(/"/g,'\\"').replace(/'/g,'"').replace(/&_DBLQUOTE_;/g,'\\"').replace(/&_SGLQUOTE_;/g,"\\'")),n.push(e),r},t=function(e,r){return n[r]},a=e.replace(/'(\\'|[^'])+'/g,r).replace(/"(\\"|[^"])+"/g,r).replace(/\b(\w+)\b\s*:/g,'"$1":').replace(/&STRING_LIT(\d+);/g,t).replace(/&STRING_LIT(\d+);/g,t).replace(/\\\r?\n/g,"");return JSON.parse(a)}var o=/\bpliny\s*\.\s*(\w+)/gm,p={fieldType:"database",fullName:"[Global]",id:"Global",description:"These are the elements in the global namespace."},f=["namespace","event","function","value","class","property","method","enumeration","record","subClass","example","error","issue","comment"].reduce(function(e,n){return e[n]=t.bind(null,n),e},{}),c=Object.assign({},f,{database:p,get:function(n){return e(p,n)}});return c});
