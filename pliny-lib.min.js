"use strict";!function(){function e(e,t){return t.split(".").reduce(function(e,t){return e[t]},e)}var t=function(t){function r(e){for(var t=1,r=0,n=e.split("").map(function(e){return e.charCodeAt(0)}),i=0;i<n.length;++i)t=(t+n[i])%32771,r=(r+t)%32771;return r<<8|t}function n(t,r){return"string"==typeof r||r instanceof String?e(t,r):r}function i(e){var t=p;if("undefined"!=typeof e&&e.length>0)for(var r=e.split("."),n="",i="",a=0;a<r.length;++a)"undefined"==typeof t[r[a]]&&(t[r[a]]={}),n+=i+r[a],i=".",t=t[r[a]],n.length>0&&!t.name&&(t.name=n);return t}function a(e,t){var r;"undefined"==typeof t.fieldType&&(t.fieldType=e);var n=i(t.parent||""),a=e+"s";a=a.replace(/ys$/,"ies").replace(/ss$/,"ses"),n[a]||(n[a]=[]);var s=n[a],l=!1;for(r=0;r<s.length;++r)s[r].name===t.name&&(l=!0);if(!l){var f={};["examples","issues","comments"].forEach(function(e){"undefined"!=typeof t[e]&&(f[e]=t[e],delete t[e])}),t=o(t),s.push(t),"class"===t.fieldType&&t.baseClass&&(void 0===t.parent&&(t.parent=t.baseClass),y.subClass(t));for(var c in f){var u=f[c],d=c.substring(0,c.length-1);for(r=0;r<u.length;++r)void 0===u[r].parent&&(u[r].parent=t.fullName.replace(/::/g,".")),y[d](u[r])}}}function o(e){var t=(e.parent&&e.parent+"."||"")+e.name,n=i(t);if(!n.fieldType){for(var a in e)n[a]=e[a];n.fullName||("issue"===n.fieldType&&Object.defineProperty(n,"issueID",{get:function(){return r(this.parent+"."+this.name)}}),Object.defineProperty(n,"fullName",{get:function(){var e="";return this.parent&&(e+=this.parent,e+="method"===this.fieldType||"property"===this.fieldType||"event"===this.fieldType?"::":"example"===this.fieldType||"issue"===this.fieldType?": ":"."),e+=this.name}})),n.id||Object.defineProperty(n,"id",{get:function(){return this.fullName.replace(/(\.|:)/g,"_").replace(/ /g,"")}}),l(t)||setTimeout(l,1,t)}return n}function s(e){var r=null;try{r=t(e)}catch(e){r=null}if(r)for(var n in r){var i=r[n];r.hasOwnProperty(n)&&"number"==typeof i&&y.value({parent:e,name:n,type:"Number",description:i.toString(),value:i})}else setTimeout(s,1,e)}function l(t){var r=e(p,t);if(r&&("enumeration"===r.fieldType&&s(r.parent+"."+r.name),"function"==typeof r))for(var n=r.toString(),i=null;i=m.exec(n);){var a=i[1],o=i.index+i[0].length,l=f(n.substring(o));void 0===l.parent&&(l.parent=t),y[a].call(null,l)}return r}function f(e){for(var t=[],r=0,n=0,i=!1,a=null,o=0;o<e.length;++o){var s=e.charAt(o);if((!i||s!==a)&&(i||'"'!==s&&"'"!==s)||0!==o&&"\\"===e.charAt(o-1)||(i=!i,i&&(a=s)),i||("("===s||"{"===s||"["===s?++n:")"!==s&&"}"!==s&&"]"!==s||--n),(0===n||1===n&&","===s&&!i)&&(t.push(u(e.substring(r+1,o).trim())),r=o,0===n))break}if(1!==t.length)throw new Error("There should have only been one parameter to the function");return t[0]}function c(e){return e}function u(e){var t=[],r=function(e){var r="&STRING_LIT"+t.length+";";return"'"===e[0]&&(e=e.replace(/\\"/g,"&_DBLQUOTE_;").replace(/\\'/g,"&_SGLQUOTE_;").replace(/"/g,'\\"').replace(/'/g,'"').replace(/&_DBLQUOTE_;/g,'\\"').replace(/&_SGLQUOTE_;/g,"\\'")),t.push(e),r},n=function(e,r){return t[r]},i=e.replace(/'(\\'|[^'])+'/g,r).replace(/"(\\"|[^"])+"/g,r).replace(/\b(\w+)\b\s*:/g,'"$1":').replace(/&STRING_LIT(\d+);/g,n).replace(/&STRING_LIT(\d+);/g,n).replace(/\\\r?\n/g,"");return JSON.parse(i)}var d=t("marked"),p={fieldType:"database",fullName:"[Global]",id:"Global",description:"These are the elements in the global namespace."},m=/\bpliny\s*\.\s*(\w+)/gm,h={format:function(t){var r=null;if(r="string"==typeof t||t instanceof String?e(p,t):t){var n=this.shortDescription(!0,r);return n+="\n\n"+["parent","description","parameters","returns","errors","namespaces","classes","functions","values","events","properties","methods","enumerations","records","examples","issues","comments"].map(h.checkAndFormatField.bind(this,r)).filter(c).join("\n")}},checkAndFormatField:function(e,t){var r=e[t];if(r)return this.formatField(e,t,r)}};h.html={format:function(e){var t=n(p,e);return'<section id="'+t.id+'" class="'+t.fieldType+'"><article>'+h.format.call(h.html,t)+"</article></section>"},formatField:function(e,t,r){var n="";return n+="enumeration"===e.fieldType&&"values"===t?this.formatEnumeration(e,t,r):r instanceof Array?this.formatArray(e,t,r):"parent"===t?'<p>Contained in <a href="index.html#'+y.get(r).id+'"><code>'+r+"</code></a></p>":"description"===t?d(r):"returns"===t?"<h3>Return value</h3>"+d(r):"<dl><dt>"+t+"</dt><dd>"+r+"</dd></dl>"},formatEnumeration:function(e,t,r){for(var n="<table><thead><tr><th>Name</th><th>Value</th><tr><thead><tbody>",i=0;i<r.length;++i){var a=r[i];n+="<tr><td>"+a.name+"</td><td>"+a.description+"</td></tr>"}return n+="</tbody></table>"},examplesFormat:function(e,t){for(var r="",n=0;n<t.length;++n){var i=t[n];r+='<div><h3><a href="index.html#'+i.id+'">'+i.name+"</a></h3>"+d(i.description)+"</div>"}return r},issuesFormat:function(e,t){for(var r={open:"",closed:""},n=0;n<t.length;++n){var i=t[n],a='<div><h3><a href="index.html#'+i.id+'">'+i.issueID+": "+i.name+" ["+i.type+"]</a></h3>"+d(i.description)+"</div>";r[i.type]+=a}return r.open+"<h2>Closed Issues</h2>"+r.closed},commentsFormat:function(e,t){for(var r="",n=0;n<t.length;++n){var i=t[n];r+="<aside><h3>"+i.name+"</h3>"+d(i.description),"undefined"!=typeof i.comments&&i.comments instanceof Array&&(r+=this.formatArray(i,"comments",i.comments)),r+="</aside>"}return r},formatArray:function(e,t,r){var n="<h2>";"class"===e.fieldType&&("parameters"===t?n+="constructor ":"functions"===t&&(n+="static ")),"description"!==t&&(n+=t),n+="</h2>";var i=t+"Format";return n+=this[i]?this[i](e,r):'<ul class="'+t+'">'+r.map(this.formatArrayElement.bind(this,t)).join("")+"</ul>"},formatArrayElement:function(e,t){var r="<li>";if(t.description){var n=t.description.match(/^(([^\n](\n[^\n])?)+)\n\n/);n=n?n[1]+"...":t.description,t.optional&&(n="(Optional) "+n),void 0!==t.default&&(n+=" Defaults to <code>"+t.default+"</code>."),r+="<dl><dt>"+this.shortDescription(!1,t)+"</dt><dd>"+d(n)+"</dd></dl>"}else r+=this.shortDescription(!1,t);return r+="</li>"},shortDescription:function(e,t){var r="",n=e?"h1":"span",i="function"===t.fieldType||"method"===t.fieldType||"event"===t.fieldType,a=i||"class"===t.fieldType||"namespace"===t.fieldType||"enumeration"===t.fieldType||"subClass"===t.fieldType||"record"===t.fieldType;return r+="<"+n+">",a&&!e&&(r+='<a href="index.html#'+t.id+'">'),r+="<code>"+(e&&"example"!==t.fieldType&&t.fullName||t.name),t.type&&(r+=' <span class="type">'+t.type+"</span>"),i&&(r+='<ol class="signatureParameters">',t.parameters&&(r+="<li>"+t.parameters.map(function(e){return e.name}).join("</li><li>")+"</li>"),r+="</ol>"),a&&!e&&(r+="</a>"),r+"</code></"+n+">"}},h.console={format:function(e){return h.format.call(h.console,e)},formatField:function(e,t,r){return r instanceof Array?this.formatArray(e,t,r):"description"===t?"\t"+r+"\n":"\t"+t+": "+r+"\n"},formatArray:function(e,t,r){var n="\t";return"class"===e.fieldType&&("parameters"===t?n+="constructor ":"functions"===t&&(n+="static ")),"description"!==t&&(n+=t+":\n"),n+=r instanceof Array?r.map(this.formatArrayElement.bind(this,t)).join(""):r},formatArrayElement:function(e,t,r){var n="\t\t"+r+": "+this.shortDescription(!1,t);return t.description&&(n+=" - "+t.description,"parameters"!==e&&"properties"!==e&&"methods"!==e&&n.length>200&&(n=n.substring(0,200)+"...")),n+="\n"},shortDescription:function(e,t){var r="";return(e||t.type)&&(r+="["+(t.type||t.fieldType)+"] "),r+=e?t.fullName:t.name,"function"!==t.fieldType&&"method"!==t.fieldType||(r+="(",t.parameters&&(r+=t.parameters.map(this.shortDescription.bind(this,!1)).join(", ")),r+=")"),r}};var y=h.console.format;return y.database=p,y.formats=h,y.get=e.bind(null,y.database),y.markdown=d,y.carve=function(e,r,n,i){var a=t("fs");a.readFile(e,"utf-8",function(e,t){for(var o=/pliny\.\w+/g,s=0,l="",f="",c=o.exec(t);c;){var u=t.substring(s,c.index);l+=u;var d=0,p=!1,m=!1;for(s=c.index+c.length;s<t.length&&('"'!==t[s]||0!==s&&"\\"===t[s-1]||(p=!p),p||("("===t[s]?(m=!0,++d):")"===t[s]&&--d),0!==d||!m);++s);for(;s<t.length&&/[;\) \r\n]/.test(t[s]);)s++;f+=t.substring(c.index,s),c=o.exec(t)}l+=t.substring(s),a.writeFile(r,l,function(){a.writeFile(n,f,i)})})},["namespace","event","function","value","class","property","method","enumeration","record","subClass","example","error","issue","comment"].forEach(function(e){y[e]=y[e]||a.bind(null,e)}),y}("undefined"!=typeof require&&require||e.bind(null,window));"undefined"!=typeof window&&(window.pliny=t)}();